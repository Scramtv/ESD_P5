linspace_resolution_test_0_degrees_16bit

SUBDIVISIONS, ELAPSED TIME (s), AOA
2, 0.000718, -90.0
4, 0.000887, 29.999999999999993
8, 0.001678, -12.857142857142858
16, 0.003076, -6.000000000000009
32, 0.006368, -2.9032258064516125
64, 0.010253, 1.4285714285714342
128, 0.020563, -0.7086614173228364
256, 0.039852, -0.35294117647058726
512, 0.083067, 0.17612524461839163
1024, 0.170010, -0.08797653958944127
2048, 0.313623, -0.043966780654607775
4096, 0.619742, -0.021978021978022847
8192, 1.260990, -0.010987669393236348
16384, 2.472324, 0.005493499359097278
32768, 5.077015, 0.002746665852843093

##########################################################################
TEST CODE
##########################################################################
import time
import numpy as np

sample_rate = 61.44e6
N = 10000 # samples
t = np.arange(N)/sample_rate # time vector

### TX SIGNAL
theta_deg = 0 # Angle of arrival
theta_rad = np.deg2rad(theta_deg)
f = 2e4
tx = np.exp(2j * np.pi * f * t)
d = 0.5 # wavelength spacing
elements = 2
k = np.arange(elements)

s = np.exp(2j * np.pi * d * k * np.sin(theta_rad))
s = s.reshape(-1,1) # make s a column vector
tx = tx.reshape(1,-1) # make tx a row vector

### RX SIGNAL
X = s @ tx
n = np.random.randn(elements, N) + 1j*np.random.randn(elements, N) #Noiseh
X_n = X + 0.0 * n

### TEST CODE
## FUNCTIONALITY TEST
print("SUBDIVISIONS, ELAPSED TIME (s), AOA")
for i in range(1,16):
    angle_subdiv = 2**(i)
    start = time.perf_counter()
    theta_sweep = np.linspace(-1 * np.pi / 2, np.pi / 2, angle_subdiv)
    results = []
    for thetas in theta_sweep:
        w = np.exp(2j * np.pi * d * k * np.sin(thetas))
        y = w.conj().T @ X_n
        results.append(np.abs(np.sum(y)))
    stop = time.perf_counter()
    print(f"{angle_subdiv}, {stop-start:.6f}, {np.rad2deg(theta_sweep[np.argmax(results)])}")